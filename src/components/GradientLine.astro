---
interface Props {
  seed?: number;
  class?: string;
}

const { seed = 1, class: className = '' } = Astro.props;

// Generate colors from seed
const hue1 = (seed * 12.508) % 360;
const hue2 = (hue1 + 1)% 360;
const hue3 = (hue1 + 45) % 360;
---

<div class:list={['gradient-line', className]}>
  <svg viewBox="0 0 1200 4" preserveAspectRatio="none">
    <defs>
      <linearGradient id={`line-grad-${seed}`} x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" style={`stop-color: hsl(${hue1}, 50%, 60%); stop-opacity: 0`} />
        <stop offset="20%" style={`stop-color: hsl(${hue1}, 50%, 60%); stop-opacity: 0.6`} />
        <stop offset="50%" style={`stop-color: hsl(${hue2}, 45%, 55%); stop-opacity: 0.8`} />
        <stop offset="80%" style={`stop-color: hsl(${hue3}, 40%, 50%); stop-opacity: 0.6`} />
        <stop offset="100%" style={`stop-color: hsl(${hue3}, 40%, 50%); stop-opacity: 0`} />
      </linearGradient>
      <filter id={`line-blur-${seed}`}>
        <feGaussianBlur in="SourceGraphic" stdDeviation="0.5" />
      </filter>
    </defs>
    <rect
      width="100%"
      height="2"
      y="1"
      fill={`url(#line-grad-${seed})`}
      filter={`url(#line-blur-${seed})`}
    />
  </svg>
</div>

<style>
  .gradient-line {
    width: 100%;
    height: 4px;
    overflow: visible;
  }

  .gradient-line svg {
    width: 100%;
    height: 100%;
    display: block;
  }
</style>
